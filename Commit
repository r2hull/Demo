app:
  temp-dir: ${java.io.tmpdir}  # Default system temp directory

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;

@Configuration
public class MerchantConfig {

    @Value("${app.temp-dir}")
    private String tempDir;

    public String getTempDir() {
        return tempDir;
    }
}




import java.nio.file.Path;
import java.nio.file.Paths;

private final MerchantConfig merchantConfig; // Injected via constructor

private File createTempFile(UUID requestId) {
    try {
        Path tempDir = Paths.get(merchantConfig.getTempDir()); // Get directory from config
        File tempFile = Files.createTempFile(tempDir, "speech_" + System.currentTimeMillis() + "_" + requestId, ".wav").toFile();
        tempFile.deleteOnExit();
        logger.debug("Temporary file created: {}", tempFile.getAbsolutePath());
        return tempFile;
    } catch (IOException e) {
        logger.error("Failed to create temp file for requestId: {}", requestId, e);
        return null;
    }
}