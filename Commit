spring:
  profiles:
    active: dev
  application.name: epay_reporting_service
# Db connectivity
  jpa:
    show-sql: true
    properties.hibernate.show_sql: true
  datasource:
    url: jdbc:oracle:thin:@10.177.134.124:1590:epaydbdev1
    username:
    password:
    driver-class-name: oracle.jdbc.OracleDriver
  
  # Liquibase Properties
  liquibase:
    change-log: classpath:db/changelog/db.changelog-master.xml
    enabled: true
    drop-first: false
  kafka:
    bootstrapServers: dev-cluster-kafka-bootstrap-dev-kafka.apps.dev.sbiepay.sbi:443
    consumer:
      groupId: merchant-consumers
      keyDeserializer: org.apache.kafka.common.serialization.StringDeserializer
      valueDeserializer: org.apache.kafka.common.serialization.StringDeserializer
      autoOffsetReset: latest # consumer reading msg from latest offset
      autoCommitInterval: 100 # interval of auto commit
      enableAutoCommit: true #ensure offset are updated periodically without manual intervention
      sessionTimeoutMS: 300000
      requestTimeoutMS: 420000 #max time broker wait to collect data before responding a request
      fetchMaxWaitMS: 200 # max time the broker waits
      maxPollRecords: 5 # max number of the records consumer return in single poll operation
      retryMaxAttempts: 3
      retryBackOffInitialIntervalMS: 10000
      retryBackOffMaxIntervalMS: 30000
      retryBackOffMultiplier: 2
      spring.json.trusted.packages: com.epay.reporting
      numberOfConsumers: 1
    producer:
      keyDeserializer: org.apache.kafka.common.serialization.StringSerializer
      valueDeserializer: org.apache.kafka.common.serialization.StringSerializer
      acks: all
      retries: 3
      batchSize: 1000 #Max number of bytes that will send in a single batch
      lingerMs: 1 # time the producer wait before sending a batch,even if the batch isn't full
      bufferMemory: 33554432 # available amount of memory to the producer
    topic:
      report: merchant_report_topic
      partitions: 4
      replicationFactor: 1


external:
  api:
    merchant:
      services:
        base:
          path: http://localhost:9093/merchant/v1

# Spring Security
security:
  jwt:
    secret:
      issuer: https://sbi.epay.com
      key: gdjfgskjfhsdjkhkflkdlksdlfkskfwperip3ke3le3lmldrnkfnhiewjfejfokepfkldkfoikfokork3dklwedlsvflvkfkvlkdfvodkvcdokro3
  whitelist:
    urls: /webjars/, /actuator/, /swagger-resources/, /v3/api-docs, /v3/api-docs/**, /swagger-ui/**, /index.html
  cors:
    allowed:
      origins: "*"

logging:
  level:
    liquibase: DEBUG

server:
  servlet:
    context-path: /reporting/v1/
  port: 9096

scheduled:
  cron:
    time: 0 */30 * * * *
  report:
    execution:
      window: 30

  jpa:
    properties:
      hibernate:
        jdbc:
          batch_size: 400
        order_updates: true
        order_inserts: true
        batch_versioned_data: true
        generate_statistics: true
