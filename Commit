@Bean
public JpaPagingItemReader<ReportScheduleManagement> reader(EntityManagerFactory entityManagerFactory) {
    return new JpaPagingItemReaderBuilder<ReportScheduleManagement>()
            .name("reportScheduleReader")
            .entityManagerFactory(entityManagerFactory)
            .queryString("SELECT r FROM ReportScheduleManagement r WHERE r.status = 'TO_BE_START'")
            .pageSize(10)
            .build();
}

@Component
public class ReportItemProcessor implements ItemProcessor<ReportScheduleManagement, ReportManagement> {

    @Override
    public ReportManagement process(ReportScheduleManagement schedule) {
        return ReportManagement.builder()
                .reportId(schedule.getReportId())
                .status(ReportStatus.TO_BE_GENERATE)
                .durationFromDate(schedule.getLastScheduleExecutionTime())
                .build();
    }
}



@Bean
public JpaItemWriter<ReportManagement> writer(EntityManagerFactory entityManagerFactory) {
    return new JpaItemWriterBuilder<ReportManagement>()
            .entityManagerFactory(entityManagerFactory)
            .build();
}