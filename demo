
-- CREATE MASTER TABLE
create table LIST_OF_MASTER (
    ID RAW(16) DEFAULT SYS_GUID() NOT NULL ENABLE, 
    MASTER_NAME     VARCHAR2(100) NOT NULL,
    CREATED_BY      VARCHAR2(100) NOT NULL,
 	CREATED_AT      NUMBER NOT NULL,
 	UPDATED_BY      VARCHAR2(100) NOT NULL,
 	UPDATED_AT      NUMBER NOT NULL,
    ACTIVE          NUMBER(1) DEFAULT 1,
    CONSTRAINT PK_LIST_OF_MASTER PRIMARY KEY (ID)
);


-- CREATE VALUE TABLE
CREATE TABLE LIST_OF_VALUE (
    ID RAW(16) DEFAULT SYS_GUID() NOT NULL ENABLE, 
    MASTER_ID       RAW(16) NOT NULL ENABLE, 
    VALUE_NAME      VARCHAR2(200) NOT NULL,
    VALUE_ALIAS     VARCHAR2(50),
    CREATED_BY      VARCHAR2(100) NOT NULL,
   	CREATED_AT      NUMBER NOT NULL,
   	UPDATED_BY      VARCHAR2(100) NOT NULL,
   	UPDATED_AT      NUMBER NOT NULL,
    ACTIVE          NUMBER(1) DEFAULT 1,
    CONSTRAINT PK_LIST_OF_VALUE PRIMARY KEY (ID),
    CONSTRAINT FK_MASTER_VAL FOREIGN KEY (MASTER_ID) REFERENCES LIST_OF_MASTER(ID)
);


@EqualsAndHashCode(callSuper = true)
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
@Entity
@Table(name = "LIST_OF_MASTER")
public class ListOfMaster extends AuditEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.UUID)
    private UUID id;
    private String masterName;
    private long active;
}



@EqualsAndHashCode(callSuper = true)
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
@Entity
@Table(name = "LIST_OF_VALUE")
public class ListOfValue extends AuditEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.UUID)
    private UUID id;
    private UUID masterId;
    private String valueName;
    private String valueAlias;
    private long active;
}

@Getter
@Setter
@Audited
@MappedSuperclass
public class AuditEntity extends AuditEntityByDate implements Serializable {

    @CreatedBy
    private String createdBy;

    @LastModifiedBy
    private String updatedBy;

}

@Getter
@Setter
@MappedSuperclass
@Audited
@EntityListeners(AuditingEntityListener.class)
public class AuditEntityByDate implements Serializable {

    @CreatedDate
    private Long createdAt;

    @LastModifiedDate
    private Long updatedAt;

}

