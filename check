@Component
public class PurgeScheduler {

    @Value("${payout.purge.retention-days}")
    private int retentionDays;

    @Autowired
    private MerchantAccountFileWisePayoutRepo payoutRepo;

    @Scheduled(cron = "0 0 2 * * ?") // Runs daily at 2 AM
    public void purgeOldData() {
        long cutoffTimestamp = System.currentTimeMillis() - (retentionDays * 24L * 60 * 60 * 1000);
        payoutRepo.deleteOlderThan(cutoffTimestamp);
    }
}


payout.purge.retention-days=7