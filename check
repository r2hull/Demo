private Pageable validateAndSanitizePageable(Pageable pageable, int maxSize, String defaultSortField) {
    // Validate page size
    if (pageable.getPageSize() > maxSize) {
        throw new ResponseStatusException(HttpStatus.BAD_REQUEST, "Page size cannot be greater than " + maxSize);
    }

    // Check if sort is invalid or null
    boolean invalidSort = pageable.getSort().stream()
            .anyMatch(order -> order.getProperty() == null || order.getProperty().equalsIgnoreCase("null"));

    if (pageable.getSort().isUnsorted() || invalidSort) {
        return PageRequest.of(
                pageable.getPageNumber(),
                pageable.getPageSize(),
                Sort.by(Sort.Direction.DESC, defaultSortField)
        );
    }

    return pageable;
}